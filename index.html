<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>â¤ï¸ ç»™ä½•çº¢éœå®å®çš„çˆ± â¤ï¸</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #FFE5E5 0%, #FFD1DC 100%);
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* ä¸»æŒ‰é’®æ ·å¼ */
        .main-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            z-index: 1000;
            position: relative;
        }
        
        .main-title {
            color: #D63384;
            font-size: 20px;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .launch-btn {
            background: #FF69B4;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            transition: all 0.3s ease;
            touch-action: manipulation;
        }
        
        .launch-btn:hover {
            background: #FF1493;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }
        
        .launch-btn:active {
            transform: translateY(0);
        }
        
        .progress-text {
            color: #FF1493;
            font-size: 14px;
            margin-top: 10px;
            height: 20px;
        }
        
        /* å¼¹çª—æ ·å¼ */
        .popup {
            position: absolute;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            cursor: pointer;
            user-select: none;
            transition: opacity 0.3s ease;
            animation: fadeIn 0.5s ease forwards;
            z-index: 100;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            touch-action: manipulation;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            to {
                opacity: 0.95;
                transform: scale(1) translateY(0);
            }
        }
        
        .popup.closing {
            animation: fadeOut 0.5s ease forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: scale(0.9);
            }
        }
        
        .popup-text {
            font-size: 14px;
            font-weight: bold;
            color: #5A2D48;
            text-align: center;
            pointer-events: none;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        .popup-close {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: #8B4789;
            font-size: 12px;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 50%;
            pointer-events: all;
            transition: background 0.2s;
        }
        
        .popup-close:hover {
            background: rgba(139, 71, 137, 0.1);
        }
        
        /* ä¸»çˆ±å¿ƒçª—å£æ ·å¼ */
        .main-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 250px;
            background: #FF1493;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.4);
            z-index: 10000;
            display: none;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            padding: 20px;
        }
        
        .main-popup.show {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .heart-text {
            font-size: 40px;
            color: white;
            text-align: center;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .close-all-btn {
            background: white;
            color: #FF1493;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .close-all-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- ä¸»ç•Œé¢ -->
    <div class="main-container" id="mainContainer">
        <div class="main-title">â¤ï¸ ç»™ä½•çº¢éœå®å®çš„çˆ± â¤ï¸</div>
        <button class="launch-btn" onclick="launchPopups()">å‘å°„çˆ±å¿ƒå¼¹çª— ğŸ’•</button>
        <div class="progress-text" id="progressText"></div>
    </div>
    
    <!-- ä¸»çˆ±å¿ƒå¼¹çª— -->
    <div class="main-popup" id="mainPopup">
        <div class="heart-text">â¤ï¸<br>æ°¸è¿œçˆ±ä½ </div>
        <button class="close-all-btn" onclick="closeAllPopups()">ç‚¹æˆ‘å…³é—­æ‰€æœ‰çª—å£ ğŸ’</button>
    </div>

    <script>
        // æš–å¿ƒè¯è¯­åˆ—è¡¨
        const messages = [
            "è¦å¤©å¤©å¼€å¿ƒå– ğŸ’–", "äº‹äº‹å¥½å¿ƒæ„ ğŸŒ¸", "æ¢¦æƒ³æˆçœŸ âœ¨", 
            "å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœ ğŸ§£", "æ„¿æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤± ğŸƒ",
            "ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜› ğŸŒˆ", "è®°å¾—åƒæ°´æœ ğŸ", "å¤šå–æ°´å“¦~ ğŸ’§",
            "é¡ºé¡ºåˆ©åˆ© ğŸ€", "ä¿æŒå¥½å¿ƒæƒ… ğŸ˜Š", "æœŸå¾…ä¸‹ä¸€æ¬¡è§é¢ ğŸ¤—",
            "åˆ«ç†¬å¤œ ğŸŒ™", "æ—©ç‚¹ä¼‘æ¯ ğŸ’¤", "å®å®æˆ‘æƒ³ä½ äº† ğŸ’•",
            "ç…§é¡¾å¥½è‡ªå·± ğŸŒ»", "æ¯å¤©éƒ½è¦å…ƒæ°”æ»¡æ»¡ âš¡", "ä½ æ˜¯æˆ‘çš„å”¯ä¸€ ğŸ’",
            "çˆ±ä½ ä¸€è¾ˆå­ â¤ï¸", "æœ‰ä½ çœŸå¥½ ğŸŒŸ", "ä½ æ˜¯æˆ‘çš„ sunshine â˜€ï¸",
            "æŠ±æŠ±ä½  ğŸ¤—", "äº²äº²ä½  ğŸ’‹", "æ°¸è¿œé™ªç€ä½  ğŸ‘«", "ä½ æ˜¯æˆ‘çš„å®è´ ğŸ‘‘",
            "æƒ³ä½ æ¯ä¸€å¤© ğŸ“…", "çˆ±ä½ ä¸‰åƒé ğŸ’¯", "ä½ æ˜¯æˆ‘çš„äººé—´ç†æƒ³ ğŸŒ™",
            "ä½™ç”Ÿè¯·å¤šæŒ‡æ•™ ğŸ’‘", "é‡è§ä½ çœŸå¥½ ğŸ€", "å¿ƒé‡Œåªæœ‰ä½  ğŸ’•"
        ];
        
        // é…è‰²æ–¹æ¡ˆ
        const colors = [
            '#FFE5E5', '#FFD1DC', '#FFA6C9', '#FFB6C1', '#FFC0CB',
            '#FFDAB9', '#FFE4E1', '#FFF0F5', '#F0E68C', '#E6E6FA',
            '#D8BFD8', '#DDA0DD', '#F0FFF0', '#FFE4F1', '#E0FFE0',
            '#FFE4B5', '#FFDEAD', '#FFE4E1', '#FFF5EE', '#FFF8DC',
            '#F0F8FF', '#E0FFFF', '#F5F5DC', '#FFE5E5', '#FFDAB9'
        ];
        
        let popupCount = 0;
        const windowsList = [];
        
        function launchPopups() {
            // ç¦ç”¨æŒ‰é’®
            document.querySelector('.launch-btn').disabled = true;
            document.querySelector('.launch-btn').textContent = 'å‘å°„ä¸­...';
            
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            const numWindows = 100;
            const usedPositions = [];
            
            // è¿›åº¦æ›´æ–°
            const progressText = document.getElementById('progressText');
            progressText.textContent = 'æ­£åœ¨å‘å°„çˆ±å¿ƒ... 0%';
            
            for (let i = 0; i < numWindows; i++) {
                const delay = i * 150;  // ä¿®æ”¹ä¸º150mså»¶è¿Ÿ
                
                setTimeout(() => {
                    // éšæœºå¤§å°
                    const width = Math.floor(Math.random() * 80) + 160; // 160-240
                    const height = Math.floor(Math.random() * 50) + 90;  // 90-140
                    
                    // éšæœºä½ç½®ï¼ˆé¿å…é‡å ï¼‰
                    let posX, posY, attempts = 0;
                    do {
                        posX = Math.floor(Math.random() * (screenWidth - width - 20)) + 10;
                        posY = Math.floor(Math.random() * (screenHeight - height - 20)) + 10;
                        attempts++;
                    } while (isOverlapping(posX, posY, width, height, usedPositions) && attempts < 50);
                    
                    usedPositions.push({x: posX, y: posY, w: width, h: height});
                    
                    // éšæœºæ¶ˆæ¯å’Œé¢œè‰²
                    const message = messages[Math.floor(Math.random() * messages.length)];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    createPopup(message, color, posX, posY, width, height);
                    
                    // æ›´æ–°è¿›åº¦
                    if (i % 10 === 0) {
                        progressText.textContent = `æ­£åœ¨å‘å°„çˆ±å¿ƒ... ${i}%`;
                    }
                    
                    // æœ€åä¸€ä¸ªå¼¹çª—åˆ›å»ºå®Œæ¯•åæ˜¾ç¤ºä¸»çˆ±å¿ƒçª—å£
                    if (i === numWindows - 1) {
                        setTimeout(() => {
                            progressText.textContent = 'ğŸ’• å…¨éƒ¨å¼¹çª—å·²å‘å°„ï¼ç‚¹å‡»ä»»æ„çª—å£å…³é—­';
                            setTimeout(() => {
                                document.getElementById('mainContainer').style.display = 'none';
                                const mainPopup = document.getElementById('mainPopup');
                                mainPopup.classList.add('show');
                                mainPopup.style.display = 'flex';
                            }, 1000);
                        }, 100);
                    }
                }, delay);
            }
        }
        
        function isOverlapping(x, y, w, h, usedPositions) {
            for (let pos of usedPositions) {
                if (Math.abs(x - pos.x) < 50 && Math.abs(y - pos.y) < 40) {
                    return true;
                }
            }
            return false;
        }
        
        function createPopup(message, color, x, y, width, height) {
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.style.left = x + 'px';
            popup.style.top = y + 'px';
            popup.style.width = width + 'px';
            popup.style.height = height + 'px';
            popup.style.backgroundColor = color;
            
            popup.innerHTML = `
                <button class="popup-close" onclick="event.stopPropagation()">âœ–</button>
                <div class="popup-text">${message}</div>
            `;
            
            popup.onclick = closeAllPopups;
            
            document.body.appendChild(popup);
            windowsList.push(popup);
            popupCount++;
        }
        
        function closeAllPopups() {
            // ç»™æ‰€æœ‰å¼¹çª—æ·»åŠ å…³é—­åŠ¨ç”»
            windowsList.forEach(window => {
                if (window && window.classList) {
                    window.classList.add('closing');
                }
            });
            
            // æ·¡å‡ºåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                windowsList.forEach((window, index) => {
                    if (window && window.parentNode) {
                        window.remove();
                    }
                });
                windowsList.length = 0;
                
                // éšè—ä¸»å¼¹çª—
                const mainPopup = document.getElementById('mainPopup');
                if (mainPopup) {
                    mainPopup.style.display = 'none';
                }
                
                // é‡ç½®ä¸»ç•Œé¢
                const mainContainer = document.getElementById('mainContainer');
                mainContainer.style.display = 'flex';
                const btn = document.querySelector('.launch-btn');
                btn.disabled = false;
                btn.textContent = 'å‘å°„çˆ±å¿ƒå¼¹çª— ğŸ’•';
                document.getElementById('progressText').textContent = '';
            }, 500);
        }
    </script>
</body>
</html>
